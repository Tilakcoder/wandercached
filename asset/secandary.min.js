function toSINotation(num){if(num===0)return"0";const SI_PREFIXES=["","K","M","G","T","P","E"];const tier=Math.floor(Math.log10(Math.abs(num))/3);if(tier===0)return num.toString();const prefix=SI_PREFIXES[tier];const scaled=num/Math.pow(10,tier*3);return scaled.toFixed(1).replace(/\.0$/,'')+prefix;}
function RangeBar(currentParent,min_range=0,max_range=100,step=1){let min_button=currentParent.getElementsByClassName('min_button')[0];let max_button=currentParent.getElementsByClassName('max_button')[0];let parent=min_button.parentElement;min_button.innerText=toSINotation(min_range);max_button.innerText=toSINotation(max_range);let mininput=currentParent.getElementsByClassName("mininput");if(mininput.length){mininput=mininput[0];mininput.step=step
mininput.value=min_range;mininput.min=min_range;mininput.max=max_range-step;mininput.addEventListener('change',function(e){let value=parseFloat(e.target.value);let button_step=(parent.offsetWidth-min_button.offsetWidth)/((max_range-min_range)/step);e={'clientX':parent.getBoundingClientRect().left+(min_button.offsetWidth/2)+(button_step*(value/step))}
mininput.value=MINmouseMoveHandler(e);});}
let maxinput=currentParent.getElementsByClassName("maxinput");if(maxinput.length){maxinput=maxinput[0];maxinput.value=max_range;maxinput.step=step;maxinput.min=min_range+step;maxinput.max=max_range;maxinput.addEventListener('change',function(e){let value=parseFloat(e.target.value);let button_step=(parent.offsetWidth-min_button.offsetWidth)/((max_range-min_range)/step);e={'clientX':parent.getBoundingClientRect().left+(max_button.offsetWidth/2)+(button_step*(value/step))}
maxinput.value=MAXmouseMoveHandler(e);});}
function MINmouseMoveHandler(e){if(e.touches){e=e.touches[0];}
let minWidth=min_button.offsetWidth;let button_step=(parent.offsetWidth-min_button.offsetWidth)/((max_range-min_range)/step);let left=e.clientX-parent.getBoundingClientRect().left-(minWidth/2);if(left<0)left=0;let maximumLeft=(Math.round(max_button.offsetLeft/button_step)-1)*button_step;left=Math.round(left/button_step)*button_step;if(left>maximumLeft){left=maximumLeft;}
let target_number=Math.round(left/button_step)*step;min_button.innerText=toSINotation(target_number);if(mininput){mininput.value=target_number};min_button.style.left=left+'px';return target_number;}
function MAXmouseMoveHandler(e){if(e.touches){e=e.touches[0];}
let button_step=(parent.offsetWidth-min_button.offsetWidth)/((max_range-min_range)/step);let maxWidth=max_button.offsetWidth;let parentWidth=parent.offsetWidth;let left=e.clientX-parent.getBoundingClientRect().left-(maxWidth/2);let minimumLeft=(Math.round(min_button.offsetLeft/button_step)+1)*button_step;left=Math.round(left/button_step)*button_step;if(left<minimumLeft)left=minimumLeft;let target_number=(Math.round(left/button_step)*step);if(left>parentWidth-maxWidth){left=parentWidth-maxWidth;target_number=max_range};max_button.innerText=toSINotation(target_number);if(maxinput){maxinput.value=target_number;}
max_button.style.left=left+'px';return target_number;}
min_button.addEventListener('mousedown',function(e){e.preventDefault();function mouseUpHandler(){document.removeEventListener('mousemove',mouseMoveHandler);document.removeEventListener('mouseup',mouseUpHandler);}
function mouseMoveHandler(e){MINmouseMoveHandler(e);}
document.addEventListener('mousemove',mouseMoveHandler);document.addEventListener('mouseup',mouseUpHandler);});min_button.addEventListener('touchstart',function(e){e.preventDefault();function mouseUpHandler(){document.removeEventListener('touchmove',mouseMoveHandler);document.removeEventListener('touchend',mouseUpHandler);}
function mouseMoveHandler(e){MINmouseMoveHandler(e);}
document.addEventListener('touchmove',mouseMoveHandler);document.addEventListener('touchend',mouseUpHandler);});max_button.addEventListener('mousedown',function(e){e.preventDefault();function mouseMoveHandler(e){MAXmouseMoveHandler(e);}
function mouseUpHandler(){document.removeEventListener('mousemove',mouseMoveHandler);document.removeEventListener('mouseup',mouseUpHandler);}
document.addEventListener('mousemove',mouseMoveHandler);document.addEventListener('mouseup',mouseUpHandler);});max_button.addEventListener('touchstart',function(e){e.preventDefault();function mouseMoveHandler(e){MAXmouseMoveHandler(e);}
function mouseUpHandler(){document.removeEventListener('touchmove',mouseMoveHandler);document.removeEventListener('touchend',mouseUpHandler);}
document.addEventListener('touchmove',mouseMoveHandler);document.addEventListener('touchend',mouseUpHandler);});};function SliderLogic(sliderparent,element_shown_at_once_=1,autoshift=true,show_simple=false,eleclass='slidereles',draggable=true,show_navigation=true){let slider=sliderparent.getElementsByClassName("slider")[0];let leftbutton=sliderparent.getElementsByClassName("leftbutton");leftbutton=leftbutton[leftbutton.length-1]
let rightbutton=sliderparent.getElementsByClassName("rightbutton");rightbutton=rightbutton[rightbutton.length-1]
let navigators_parent=sliderparent.getElementsByClassName("slide-navigator");navigators_parent=navigators_parent[navigators_parent.length-1]
let navigators;let isDragging=false;let autoshift_interval=5000;let cooldownneed=false;let navigators_built=false;if(navigators_parent){navigators=navigators_parent.getElementsByTagName("span");}else{show_navigation=false}
function buildNavigators(){if(navigators_built)return;for(let i=0;i<navigators.length;i++){navigators[i].addEventListener('click',()=>{currentIndex=-1*i;setPosition(currentIndex);});navigators[i].addEventListener('touchstart',()=>{currentIndex=-1*i;setPosition(currentIndex);});}
navigators_built=true;}
let slider_elements=slider.getElementsByClassName(eleclass);let target_width_element=slider_elements[0];let currentIndex=0;function element_shown_at_once__(){if(!slider||!slider_elements.length)return 0;let ewidth=target_width_element.offsetWidth;return Math.round(slider.offsetWidth/ewidth)||1;}
let element_shown_at_once=element_shown_at_once__();function setNavigation(element_index){if(navigators_parent.innerHTML==''){for(let i=0;i<slider_elements.length;i++){let span=document.createElement('span');if(i==element_index*-1){span.classList.add('onboard');}
span.addEventListener('click',()=>{currentIndex=-1*i;setPosition(currentIndex);});navigators_parent.appendChild(span);}
navigators=navigators_parent.getElementsByTagName("span");}
else{navigators[element_index*-1].classList.add('onboard');for(let i=0;i<navigators.length;i++){if(i!=element_index*-1){navigators[i].classList.remove('onboard');}}}
buildNavigators();}
function setPosition(element_index){if(element_shown_at_once>slider_elements.length){element_shown_at_once=slider_elements.length}
slider.classList.add('transition-all','duration-500');element_index=(element_index*-1>(slider_elements.length-element_shown_at_once))?-1*(slider_elements.length-element_shown_at_once):element_index;slider.style.left=element_index*target_width_element.offsetWidth+"px";if(element_index==(slider_elements.length-element_shown_at_once)*-1){rightbutton.classList.add('hidden');}else{rightbutton.classList.remove('hidden');}
if(element_index==0){leftbutton.classList.add('hidden');}else{leftbutton.classList.remove('hidden');}
setTimeout(()=>{slider.classList.remove('transition-all','duration-500');},500);if(show_navigation){setNavigation(element_index)};}
setPosition(currentIndex);function slidelogic(e){cooldownneed=true;e.preventDefault();let startX=e.clientX||e.touches[0].clientX;let startY=e.clientY||e.touches[0].clientY;isDragging=true;let scroll_it_y=false;if(e.touches){show_simple=true;}
const onMouseMove=(e)=>{e.preventDefault();if(!isDragging)return;let currentX=e.clientX||e.touches[0].clientX;let currentY=e.clientY||e.touches[0].clientY;let diff=currentX-startX;let diffY=currentY-startY;let calculatedLeft=(currentIndex*target_width_element.offsetWidth);if(!show_simple){calculatedLeft=((calculatedLeft+diff>0)||(calculatedLeft+diff<-1*((slider_elements.length-1)*target_width_element.offsetWidth)))?calculatedLeft+(diff*0.2):calculatedLeft+diff;}else{calculatedLeft+=diff;}
if(Math.abs(diffY)>20&&!scroll_it_y){window.scrollBy(0,-diffY);scroll_it_y=true;startY=currentY;}
if(scroll_it_y){window.scrollBy(0,-diffY);startY=currentY;}
slider.style.left=calculatedLeft+'px';};const onMouseUp=()=>{isDragging=false;slider.removeEventListener('mouseleave',onMouseUp);slider.removeEventListener('pointermove',onMouseMove);slider.removeEventListener('pointerup',onMouseUp);currentIndex=Math.round(slider.offsetLeft/target_width_element.offsetWidth);currentIndex=(currentIndex<0)?currentIndex:0;currentIndex=(currentIndex*-1<slider_elements.length-element_shown_at_once)?currentIndex:(slider_elements.length-element_shown_at_once)*-1;setPosition(currentIndex);scroll_it_y=true;};slider.addEventListener('mouseleave',onMouseUp);slider.addEventListener('pointermove',onMouseMove);slider.addEventListener('pointerup',onMouseUp);};if(draggable){slider.addEventListener('mousedown',slidelogic);slider.addEventListener('touchstart',slidelogic);}
leftbutton.addEventListener('click',(e)=>{e.preventDefault();if(currentIndex<0){currentIndex++;setPosition(currentIndex);}})
leftbutton.addEventListener('touchstart',(e)=>{e.preventDefault();if(currentIndex<0){currentIndex++;setPosition(currentIndex);}})
rightbutton.addEventListener('click',(e)=>{e.preventDefault();if(currentIndex>(slider_elements.length-1)*-1){currentIndex--;setPosition(currentIndex);}})
rightbutton.addEventListener('touchstart',(e)=>{e.preventDefault();if(currentIndex>(slider_elements.length-1)*-1){currentIndex--;setPosition(currentIndex);}})
setInterval(()=>{if(cooldownneed){cooldownneed=false;return;}
if(!autoshift)return;if(autoshift&&!isDragging){if(currentIndex>(slider_elements.length-element_shown_at_once)*-1){currentIndex--;}
else{currentIndex=0;}
setPosition(currentIndex);}
else{cooldownneed=true;}},autoshift_interval);}
const stack_elents={'eles':[]};function stacksticky(current_parent,stickyPoint=-150,top_offset=-1,zindex=50,last_element=false,mobile_index=0){let navbar=current_parent.getElementsByClassName("dynamicsticky")[0];let navbarheightcloner=current_parent.getElementsByClassName("dynamicstickyadjuster")[0];let navheight=navbar.offsetHeight;navbarheightcloner.style.height=navheight+"px";let opened=false;function act_sticky(){let current_Screen=window.innerWidth;if(current_Screen>=764){return stickyPoint;}
else{return-20
}}
window.addEventListener('scroll',()=>{if(current_parent.getBoundingClientRect().top<act_sticky()){if(!opened){opened=true;navbarheightcloner.classList.remove('hidden');navbar.classList.add('fixed','left-0','right-0','z-'+zindex,'bg-white','hidden');if(last_element){navbar.classList.add('shadow-lg');}
navbar.style.top=-1*navheight+"px";setTimeout(()=>{navbar.classList.remove('hidden');setTimeout(()=>{let total_height=stack_elents['eles'].reduce((acc,el)=>acc+el.offsetHeight,0);navbar.style.top=(total_height+top_offset)-1+'px';stack_elents['eles'].push(navbar);let elements=navbar.querySelectorAll('[stick_class_remove]');elements.forEach((element)=>{element.classList.remove(element.getAttribute('stick_class_remove'));});},10);},10)}}else{navbarheightcloner.classList.add('hidden');navbar.classList.remove('fixed','left-0','right-0','z-'+zindex,'bg-white');if(last_element){navbar.classList.remove('shadow-lg');}
opened=false;stack_elents['eles']=stack_elents['eles'].filter(item=>item!==navbar);let elements=navbar.querySelectorAll('[stick_class_remove]');elements.forEach((element)=>{element.classList.add(element.getAttribute('stick_class_remove'));});}});}
function searchNselect(parentElement,name='destination'){let inputfield=parentElement.querySelector(".searchinput");let suggestions=parentElement.querySelector(".suggestiontray");let multiinputpanel=parentElement.querySelector(".multiinput");let sample_data=['Dubai','Banglore'];let used_ones=[]
function addValue(value){const wrapper=document.createElement('div');const input=document.createElement('input');let textele=document.createElement("span");input.type='text';input.value=value;input.contentEditable=false;input.name=name;textele.className="flex gap-1"
textele.innerHTML="<span>"+value+`</span><div class="size-4 flex items-center shrink-0"><svg width="24"height="24"viewBox="0 0 24 24"fill="none"xmlns="http://www.w3.org/2000/svg"><path d="M18 6L6 18M6 6L18 18"stroke="currentColor"stroke-width="1.5"stroke-linecap="round"stroke-linejoin="round"></path></svg></div>`;wrapper.appendChild(input);wrapper.appendChild(textele);wrapper.addEventListener('click',function(){var index=used_ones.indexOf(value);if(index!==-1){used_ones.splice(index,1);sample_data=sample_data.concat(value);}
wrapper.remove();});multiinputpanel.appendChild(wrapper);}
inputfield.addEventListener("input",(e)=>{fetch(`/searchlist?search=${encodeURIComponent(inputfield.value)}`).then(response=>response.json()).then(data=>{sample_data=[];data['primaryDestination'].forEach(item=>{if(item.title){sample_data.push(item.title);}});}).then(data=>{suggestions.innerHTML='';sample_data.forEach(val=>{if(!(used_ones.includes(val))){const div=document.createElement('div');div.textContent=val;div.addEventListener('click',(e)=>{used_ones=used_ones.concat(e.target.innerText);addValue(e.target.innerText);inputfield.value='';div.remove();var index=sample_data.indexOf(e.target.innerText);if(index!==-1){sample_data.splice(index,1);}})
suggestions.appendChild(div);}});}).catch(err=>{console.error('Error fetching search list:',err);});})}
function datemodule(parentElement,valids=[]){let pickers=parentElement.querySelectorAll(".datepicker");let targetinput=parentElement.querySelector(".dateinput");const today=new Date();let currentDate=(targetinput.value)?new Date(targetinput.value):'';let screendate=new Date((currentDate!='')?currentDate:today);let month_names=['JAN','FEB','MAR','APR','MAY','JUN','JUL','AUG','SEP','OCT','NOV','DEC'];let step=1;function update_single_date(date){targetinput.value=date.getFullYear()+"-"+(date.getMonth()+1)+"-"+date.getDate();}
class Datepicker{constructor(targetpicker,pickerindex,previous=null,next=null){this.parent=targetpicker;this.index=pickerindex;this.next=next;this.previous=previous;this.navigator=this.parent.querySelector(".date-navigator");this.datetitle=this.navigator.querySelector(".datetitle");this.leftbutton=this.navigator.querySelector('.leftshift');this.rightbutton=this.navigator.querySelector('.rightshift');this.mainbutton=this.navigator.querySelector(".mainbutton");this.weekpage=this.parent.querySelector(".weekpage");this.yearpage=this.parent.querySelector(".yearpage");this.nextactive=this.yearpage;this.step_selection={}
screendate.setDate(1)
this.localdate=new Date(screendate.getTime());this.localdate.setMonth(this.localdate.getMonth()+this.index);this.setscreen(this.localdate.getMonth(),this.localdate.getFullYear())
this.startyear=this.localdate.getFullYear();this.leftbutton.addEventListener('click',(e)=>{if(!this.yearpage.classList.contains('hidden')){this.startyear-=24
this.setyearscreen(this.startyear-9);}
else{this.leftshift();}})
this.rightbutton.addEventListener('click',(e)=>{if(!this.yearpage.classList.contains('hidden')){this.startyear+=24
this.setyearscreen(this.startyear-9);}
else{this.rightshift();}})
this.mainbutton.addEventListener('click',(e)=>{this.yearpage.classList.toggle('hidden');if(!this.yearpage.classList.contains('hidden')){this.setyearscreen(this.startyear-9);}
this.weekpage.classList.toggle('hidden');if(!this.weekpage.classList.contains('hidden')){this.setscreen(this.localdate.getMonth(),this.localdate.getFullYear())}})}
leftshift(chain=''){this.localdate.setMonth(this.localdate.getMonth()-step);this.setscreen(this.localdate.getMonth(),this.localdate.getFullYear())
if((chain==''||chain=='next')&&this.next){this.next.leftshift('next');}
if((chain==''||chain=='previous')&&this.previous){this.previous.leftshift('previous');}}
rightshift(chain=''){this.localdate.setMonth(this.localdate.getMonth()+step);this.setscreen(this.localdate.getMonth(),this.localdate.getFullYear())
if((chain==''||chain=='next')&&this.next){this.next.rightshift('next');}
if((chain==''||chain=='previous')&&this.previous){this.previous.rightshift('previous');}}
updatecurrent(date){currentDate=new Date(this.localdate.getTime());currentDate.setDate(date);update_single_date(currentDate);}
clearselected(){let selected=parentElement.querySelectorAll('.selected');selected.forEach(el=>el.classList.remove('selected'));}
isdatevalid(dateobj,checkYearOnly=false,checkMonthOnly=false){if(!valids||valids.length===0){const todayDate=new Date();todayDate.setHours(0,0,0,0);return dateobj>=todayDate;}
for(let validDateStr of valids){let validDate=new Date(validDateStr);if(checkYearOnly){if(dateobj.getFullYear()===validDate.getFullYear()){return true;}}else if(checkMonthOnly){if(dateobj.getFullYear()===validDate.getFullYear()&&dateobj.getMonth()===validDate.getMonth()){return true;}}else{if(dateobj.getFullYear()===validDate.getFullYear()&&dateobj.getMonth()===validDate.getMonth()&&dateobj.getDate()===validDate.getDate()){return true;}}}
return false;}
setscreen(month,year){let monthend=new Date(year,month+1,0);let startday=(new Date(year,month)).getDay();this.datetitle.innerText=month_names[month]+" "+year;let all_current_dates=this.weekpage.querySelectorAll("div");all_current_dates.forEach(el=>el.remove());for(let wnum=(startday-1)*-1;wnum<monthend.getDate()+1;wnum++){let newdiv=document.createElement("div");if(wnum>0){let cdate=new Date(year,month,wnum);if(cdate.toDateString()==today.toDateString()){newdiv.classList.add('today');}
if(currentDate&&cdate.toDateString()==currentDate.toDateString()){newdiv.classList.add('selected');}
newdiv.innerText=wnum;let tempdate=new Date(year,month,wnum);if(this.isdatevalid(tempdate)){newdiv.style.fontWeight="bold";newdiv.style.color="black";newdiv.addEventListener('click',()=>{this.updatecurrent(parseInt(newdiv.innerText));this.clearselected()
newdiv.classList.add('selected');})}}
this.weekpage.appendChild(newdiv);}}
setyearscreen(startyear){this.step_selection={};this.datetitle.innerText=startyear+" - "+(startyear+23);let all_current_years=this.yearpage.querySelectorAll("div");all_current_years.forEach(el=>el.remove());for(let ynum=startyear;ynum<startyear+24;ynum++){let newdiv=document.createElement('div');newdiv.innerText=ynum;if(ynum==today.getFullYear()){newdiv.classList.add('today');}
if(currentDate&&ynum==currentDate.getFullYear()){newdiv.classList.add('selected');}
this.yearpage.appendChild(newdiv);let newtemp=new Date(ynum,11,31);if(this.isdatevalid(newtemp,true)){newdiv.style.fontWeight='bold';newdiv.style.color='black';newdiv.addEventListener('click',(e)=>{this.step_selection['year']=parseInt(newdiv.innerText);this.setMonthscreen();})}}}
setMonthscreen(){this.datetitle.innerText=this.step_selection['year'];let all_current_years=this.yearpage.querySelectorAll("div");all_current_years.forEach(el=>el.remove());for(let ynum=0;ynum<month_names.length;ynum++){let newdiv=document.createElement('div');newdiv.innerText=month_names[ynum];if(ynum==today.getMonth()&&this.step_selection['year']==today.getFullYear()){newdiv.classList.add('today');}
if(currentDate&&ynum==currentDate.getMonth()&&this.step_selection['year']==currentDate.getFullYear()){newdiv.classList.add('selected');}
this.yearpage.appendChild(newdiv);let tempdate=new Date(this.step_selection['year'],ynum+1,0);if(this.isdatevalid(tempdate,false,true)){newdiv.style.fontWeight="bold";newdiv.style.color="black";newdiv.addEventListener('click',(e)=>{this.localdate.setYear(this.step_selection['year']);this.localdate.setMonth(month_names.indexOf(newdiv.innerText))
this.setscreen(month_names.indexOf(newdiv.innerText),this.step_selection['year']);this.yearpage.classList.add('hidden');this.weekpage.classList.remove('hidden');})}}}}
let previous=null;for(let i=0;i<pickers.length;i++){previous=new Datepicker(pickers[i],i,previous);if(previous.previous){previous.previous.next=previous;}}}